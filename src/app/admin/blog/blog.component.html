<!-- Add Blog Toggle Button -->
<div class="text-center mt-20">
  <button
    (click)="showForm = !showForm"
    class="bg-blue-600 text-white px-3 py-1 p-24 rounded-lg hover:bg-blue-700 transition duration-300"
  >
    {{ showForm || editing ? 'Close Form' : 'Add Blog' }}
  </button>
</div>

<!-- Blog Form Card -->
<div
  *ngIf="showForm || editing"
  class="max-w-md mx-auto mt-8 p-6 bg-white rounded-xl shadow-md transition-shadow hover:shadow-lg hover:scale-[1.01] duration-300"
>
  <h2 class="text-lg font-semibold mb-4 text-center">
    {{ editing ? 'Edit Blog' : 'Create Blog' }}
  </h2>
  <form (ngSubmit)="submitBlog()" #blogForm="ngForm" novalidate>
    <!-- Image URL -->
    <div class="mb-4">
      <label class="block mb-1 text-sm font-medium">Image URL (optional)</label>
      <input
        type="text"
        name="imageUrl"
        [(ngModel)]="blog.imageUrl"
        class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300 outline-none text-sm"
      />
    </div>

    <!-- Title -->
    <div class="mb-4">
      <label class="block mb-1 text-sm font-medium">Title</label>
      <input
        type="text"
        name="title"
        [(ngModel)]="blog.title"
        required
        class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300 outline-none text-sm"
      />
    </div>

    <!-- Content -->
    <div class="mb-4">
      <label class="block mb-1 text-sm font-medium">Content</label>
      <textarea
        name="content"
        [(ngModel)]="blog.content"
        required
        rows="4"
        class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-300 outline-none text-sm resize-none"
      ></textarea>
    </div>

    <!-- Submit & Cancel Buttons -->
    <div class="flex flex-col gap-2">
      <button
        type="submit"
        [disabled]="!blogForm.valid"
        class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors duration-300 text-sm"
      >
        {{ editing ? 'Update Blog' : 'Submit' }}
      </button>

      <button
        *ngIf="editing"
        type="button"
        (click)="cancelEdit()"
        class="w-full bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors duration-300 text-sm"
      >
        Cancel Edit
      </button>
    </div>
  </form>
</div>

<!-- Blog List -->
<div class="max-w-6xl mx-auto mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-4">
  <div
    *ngFor="let blogItem of blogs"
    class="bg-white border rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col"
  >
    <div class="overflow-hidden rounded-t-lg">
      <img
        *ngIf="blogItem.imageUrl"
        [src]="blogItem.imageUrl"
        alt="Blog Image"
        class="w-full h-40 object-cover transform hover:scale-105 transition-transform duration-300"
      />
    </div>
    <div class="p-4 flex flex-col flex-grow">
      <h3 class="font-semibold text-lg mb-2">{{ blogItem.title }}</h3>
      <p class="text-gray-600 flex-grow text-sm">
        {{ blogItem.content | slice: 0:150 }}{{ blogItem.content.length > 150 ? '...' : '' }}
      </p>
      <div class="mt-4 flex justify-end space-x-3">
        <button
          (click)="editBlog(blogItem)"
          class="px-4 py-1 bg-yellow-500 rounded hover:bg-yellow-600 text-white text-sm transition duration-300"
        >
          Edit
        </button>
        <button
          (click)="deleteBlog(blogItem._id)"
          class="px-4 py-1 bg-red-600 rounded hover:bg-red-700 text-white text-sm transition duration-300"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
